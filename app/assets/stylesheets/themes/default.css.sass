///////////////////////////////
//
// Default theme
//
// Over-specific vs ... [etc, find links]
//
///////////////////////////////

///////////////////////////////
//
// Functions, Mix-ins
//
///////////////////////////////

=embed-font($font-name)
  @font-face
    font-family: $font-name
    src: font-url('#{$font-name}.eot')
    src: font-url('#{$font-name}.eot?#iefix') format("embedded-opentype"), font-url('#{$font-name}.woff') format("woff"), font-url('#{$font-name}.ttf') format("truetype")
    font-weight: normal
    font-style: normal

=fade($opacity: 0, $duration: 1s)
  opacity: $opacity
  transition: all $duration ease-out
  -webkit-transition: all $duration ease-out
  -moz-transition: all $duration ease-out
  -o-transition: all $duration ease-out

=place($push: 0, $columns: 1, $pull: 0)
  +column($columns)
  +push($push)
  +pull($pull)

=push($offset: 1, $columns: $columns)
  margin-left: $total-width * ($gutter-width + $column-width) * $offset / gridsystem-width($columns) + $total-width * $gutter-width * 0.5 / gridsystem-width($columns)

///////////////////////////////
//
// Embed fonts
//
///////////////////////////////

+embed-font($headline-font)

///////////////////////////////
//
// Elements
//
///////////////////////////////

::-moz-selection
  background: $selected-background-color
  text-shadow: none
::selection
  background: $selected-background-color
  text-shadow: none

html
  overflow-y: scroll
  -webkit-text-size-adjust: auto

body, small
  line-height: $line-height
  color: $font-color
  font-size: $font-size

article[dir=rtl]
  text-align: right
  float: right

a
  text-decoration: none
  color: $link-color
  &:hover
    color: $link-hover-color
  &[dir=rtl]
    text-align: right
  &:focus
    outline: 0
  &[href*=pdf]
    color: $link-hover-color
    &:before
      +icon-download-1

iframe
  border: 0
  margin-bottom: $line-height

img
  display: block
  width: 100%
  max-width: 100%

ins
  text-decoration: none
  background-color: $highlighter-yellow

del
  color: $gray
  text-decoration: strike-through

ol, ul
  +no-bullets
  padding: 0

li
  a
    display: block

h1
  margin: $line-height 0
  line-height: $line-height
  color: $title-color
  font:
    family: $font-family-headline
    weight: normal
    size: $font-size-headline

h2, h3, h6
  display: none

///////////////////////////////
//
// Document
//
///////////////////////////////

#main, footer
  width: 90%
  margin: 0 5% $line-height 5%

header,
footer nav,
footer small
  +column(12)

.breadcrumb
  +horizontal-list
  +column(12)
  text-transform: lowercase
  a:before
    +icon-right-4
    +icon-small
  li:last-child
    &:before
      +icon-right-4
      +icon-small
      font-weight: normal

header
  position: relative
  #notice
    .success
      background-color: $highlighter-green
      &:before
        +icon-ok-1
    .error
      background-color: $highlighter-red
      color: $black
      margin: 0
      &:before
        +icon-attention-2

footer
  ul
    +columns(2)
    a:before
      +icon-right-4
      +icon-small
    a[href*=http]:before
      +icon-link-ext
      +icon-regular
    a[href*=mailto]:before
      +icon-mail
      +icon-regular
    a[href*=facebook]:before
      +icon-facebook-1
    a[href*=twitter]:before
      +icon-twitter-1
    a[href*=youtube]:before
      +icon-youtube-1
    a[href*=vimeo]:before
      +icon-vimeo
    a[href*=soundcloud]:before
      +icon-soundcloud-1
    a[href*=github]:before
      +icon-github-circled-1
    a[href*=googleplus]:before
      +icon-gplus-1
    a[href*=spotify]:before
      +icon-spotify
    a[href*=rss]:before
      +icon-rss
      +icon-regular
  small:before
    +icon-cc-by-nc-sa
    letter-spacing: 0.25em

///////////////////////////////
//
// Pages
//
///////////////////////////////

.bibliography-show
  iframe[src*='books.google']
    +place(5, 7, 0)
    height: $line-height * 20

.home-index
  figure, ul
    +column(12)
  iframe
    +column(12)
    &[src*='vimeo'],
    &[src*='youtube']
      height: $line-height * 25
    &[src*='soundcloud.com']
      height: $line-height * 6
    &[src*='soundcloud.com%2Fplaylist']
      height: $line-height * 15

ul.notes
  +column(12)
  li
    font:
      family: $font-family-body
      size: $font-size-body
    color: $font-color-body
    margin-bottom: $line-height
    display: block
    +column-break-inside(avoid)
    a:first-line
      color: $title-color

.notes-show
  figure
    +column(12)
    margin-bottom: $line-height / 2
    figcaption
      // padding-top: $line-height / 2
      // line-height: $line-height / 2
    img
      float: left
      clear: both

.notes-version
  .versions
    li:nth-child(n+2)
      display: block

#text
  font:
    family: $font-family-body
    size: $font-size-body
  p
    +hyphens
    margin: 0
    text-indent: $line-height
    text-align: justify
    &:first-of-type
      text-indent: 0
    a[href*=http]:after
      //+icon-external-link
      padding: 0 0 0 0.5em
  h2
    display: block
    font:
      family: $font-family-headline
      size: 18px
    margin: $line-height 0 0 0
    // If this occurs first it should not have this margin-top
    &+p
      margin-top: ($line-height / 2)
      text-indent: 0
    &+p:first-of-type
      margin-top: 0
      text-indent: 0

.tags
  ul
    +column(12)
    +horizontal-list
    margin-bottom: $line-height
    li
      a:after
        content: ", "
      &:last-child
        a:after
          content: ""

.versions
  ol
    +column(12)
    li
      &:first-child
        a:before
          +icon-angle-double-down
      &:nth-child(n+2)
        display: none

.notes-map,
.tags-map
  #map
    +column(12)
    height: $line-height * 20

.tags-index
  ul
    +column(12)
    +columns(2)
    &.cloud
      +inline-block-list

.tags-show
  ul.notes
    +column(12)

  ul.tags
    +column(12)
    +columns(2)

///////////////////////////////
//
// Media-queries
//
///////////////////////////////

@media only screen and (min-width: 720px)

  body
    padding-top: $line-height / 2

  #main,
  footer
    margin: 0 auto $line-height auto
    overflow: hidden

  header
    position: relative
    #notice
      position: absolute
      top: $line-height * 2

  h1
    margin: $line-height 0
    height: $line-height * 2

  .notes-index
    ul.notes
      +columns(2)

  // This is not good enough:
  // It will affect nested images by nesting
  // them inside #text.
  #note-content
    figure
      +place(0, 8, 4)
      margin-bottom: $line-height
      figcaption
        padding-top: $line-height / 2
    &.ins-fx-pol
      figcaption
        display: none
    .map_container
      position: relative
      #map
        +place(6, 4, 2)
        background-color: $light-gray
        color: $gray
        position: absolute
        height: $line-height * 6

    iframe
      +place(0, 9, 3)
      &[src*='vimeo'],
      &[src*='youtube']
        height: $line-height * 16
      &[src*='soundcloud.com']
        height: $line-height * 6
      &[src*='soundcloud.com%2Fplaylist']
        height: $line-height * 15

    #text
      position: relative
      counter-reset: term
      +place(0, 6, 6)
      margin-bottom: $line-height
      color: $font-color-body
      p
        position: relative
      span.annotation
        &:before
          counter-increment: term
          content: counter(term)
          vertical-align: super
          font-size: 14px
          margin-right: 5px
        span
          +hyphens
          +column(3, 6)
          +push(6, 6)
          position: absolute
          font:
            size: $font-size-small
          color: #c00
          line-height: $line-height / 2
          text-indent: 0
          text-align: left
          display: block
          +fade
          &:before
            content: counter(term)
            vertical-align: super
            font-size: $font-size-small
            margin-right: 5px
      &:hover
        span.annotation
          span
            +fade(1)
  // Undo all...
  // Make sure this only applies to ltr pages
  // Maybe we need to always write dir in body / html
  [dir=ltr]
    section#note-content[dir=rtl]
      #text
        +place(6, 6, 0)
      .map_container
        #map
          right: grid-width(6) + $gutter-width
      figure
        +place(4, 8, 0)

  .tags
    ul
      +place(0, 6, 6)
      margin-bottom: $line-height

  .versions
    ol
      +place(0, 6, 6)

  .tags-index
    ul
      +columns(4)

  .tags-show
    ul.notes
      +column(6)

    ul.tags
      +column(6)
      +columns(2)

  footer
    ul
      +columns(4)
      margin-bottom: $line-height

@media only screen and (min-width: 1024px)

  #main,
  footer
    width: 1080px

  ul.notes
    li
      position: relative
      height: $line-height * 3
      a
        padding-right: 33%
      img
        position: absolute
        width: 28%
        right: 2%

  .tags-index
    ul
      +columns(6)

  .tags-show
    ul.tags
      +columns(3)

  footer
    ul
      +columns(6)

//@media only screen and (min-width: 1200px)

//  #main,
//  footer
//    width: 1200px
//    margin: 0 auto $line-height auto
//    overflow: hidden

// This file was generated by html5-rails
// https://github.com/sporkd/html5-rails
// Upgrade with: $ rails generate html5:install
